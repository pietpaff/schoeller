<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title> Streaming test </title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/video.js/7.8.1/video-js.min.css" rel="stylesheet" />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/video.js/7.8.1/video.min.js"></script>
    <script src="https://unpkg.com/@videojs/http-streaming@1.13.3/dist/videojs-http-streaming.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/m3u8-parser@4.2.0/dist/m3u8-parser.min.js"></script>
  </head>
  <body>
    <video-js id="my-video" class="vjs-default-skin" controls width="640" height="264" data-setup="{}"></video-js>
    <script>
      let manifest =
`#EXTM3U
#EXT-X-VERSION:3
#EXT-X-MEDIA-SEQUENCE:0
#EXT-X-ALLOW-CACHE:YES
#EXT-X-TARGETDURATION:7
#EXTINF:6.600000,
output/aP7vLxG_460svvp9.webm_00000.ts
#EXT-X-ENDLIST`;

      let parser = new m3u8Parser.Parser();

      parser.push(manifest);
      parser.end();

      let player = videojs('my-video');
      player.src({
        src: `data:application/vnd.videojs.vhs+json,${JSON.stringify(parser.manifest)}`,
        type: 'application/vnd.videojs.vhs+json'
      });
    </script>
  </body>
</html>
